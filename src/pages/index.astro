---
// src/pages/guides/index.astro
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("guides", ({ data }) => true);

const pageTitle = "Guides â€” SmokeWins";
const pageDesc  = "Independent guides for Canadian players: payments, fast withdrawals and verification.";
---
<Base title={pageTitle} description={pageDesc} canonical="/guides/">
  <section class="container" style="padding:28px 0 8px">
    <h1 style="margin:0 0 12px">Guides</h1>
    <p class="muted" style="max-width:740px;margin:0 0 16px">
      Payments, fast withdrawals, verification and responsible gambling resources (Canada).
    </p>

    <div class="grid cards" style="display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))">
      {posts.sort((a,b) => (b.data.updated||"") < (a.data.updated||"") ? -1 : 1).map((p) => (
        <article class="card" style="padding:16px;border-radius:16px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04)">
          <h2 style="margin:0 0 6px;font-size:18px">
            <a href={`/guides/${p.slug}/`}>{p.data.title}</a>
          </h2>
          <p class="muted" style="margin:0 0 8px">{p.data.description}</p>
          {p.data.updated && <p style="font-size:12px;opacity:.85;margin:0">Updated: {p.data.updated}</p>}
        </article>
      ))}
    </div>
  </section>
</Base>
